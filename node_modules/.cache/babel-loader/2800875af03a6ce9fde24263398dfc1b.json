{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vab\\\\source\\\\repos\\\\LandSellingWebsite\\\\LandSellingWebsite\\\\ClientApp\\\\client_app\\\\src\\\\Components\\\\Services\\\\AuthProvider\\\\AuthProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { React, useState, useEffect, useContext } from \"react\";\nimport AuthProviderContext from \"./AuthProviderContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction useAuthProvide() {\n  _s();\n\n  const [user, setUser] = useState({\n    auth: false,\n    role: \"\"\n  });\n\n  let login = () => {\n    const token = localStorage.getItem(\"token\");\n\n    if (Boolean(token) && token !== \"undefined\" && token !== \"null\") {\n      let data = token.split(\".\")[1];\n      let decodedData = JSON.parse(window.atob(data));\n      let role = decodedData[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"];\n      let receivedUser = {\n        auth: true,\n        role\n      };\n      setUser(receivedUser);\n      return receivedUser;\n    }\n\n    return user;\n  };\n\n  let logout = () => {\n    setUser({\n      auth: false,\n      role: \"\"\n    });\n    localStorage.removeItem(\"token\");\n  };\n\n  return {\n    user,\n    login,\n    logout\n  };\n}\n\n_s(useAuthProvide, \"S/ciJdERo0aTGDYqGN+4jHi931A=\");\n\nexport function useAuth() {\n  _s2();\n\n  return useContext(AuthProviderContext);\n}\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nfunction AuthProvider(children) {\n  _s3();\n\n  const authUser = useAuthProvide();\n  return /*#__PURE__*/_jsxDEV(AuthProviderContext.Provider, {\n    value: authUser,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n\n_s3(AuthProvider, \"YkYH8wHmhADFB/AgphBVjcr8078=\", false, function () {\n  return [useAuthProvide];\n});\n\n_c = AuthProvider;\nexport default AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["C:/Users/vab/source/repos/LandSellingWebsite/LandSellingWebsite/ClientApp/client_app/src/Components/Services/AuthProvider/AuthProvider.js"],"names":["React","useState","useEffect","useContext","AuthProviderContext","useAuthProvide","user","setUser","auth","role","login","token","localStorage","getItem","Boolean","data","split","decodedData","JSON","parse","window","atob","receivedUser","logout","removeItem","useAuth","AuthProvider","children","authUser"],"mappings":";;;;;AAAA,SAASA,KAAT,EAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;;;AAEA,SAASC,cAAT,GAA0B;AAAA;;AACtB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAC5B;AACIO,IAAAA,IAAI,EAAE,KADV;AAEIC,IAAAA,IAAI,EAAE;AAFV,GAD4B,CAAhC;;AAMA,MAAIC,KAAK,GAAG,MAAM;AACd,UAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AAEA,QAAIC,OAAO,CAACH,KAAD,CAAP,IAAkBA,KAAK,KAAK,WAA5B,IAA2CA,KAAK,KAAK,MAAzD,EAAiE;AAC7D,UAAII,IAAI,GAAGJ,KAAK,CAACK,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAX;AACA,UAAIC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,IAAP,CAAYN,IAAZ,CAAX,CAAlB;AAEA,UAAIN,IAAI,GAAGQ,WAAW,CAAC,8DAAD,CAAtB;AAEA,UAAIK,YAAY,GAAG;AAAEd,QAAAA,IAAI,EAAE,IAAR;AAAcC,QAAAA;AAAd,OAAnB;AAEAF,MAAAA,OAAO,CAACe,YAAD,CAAP;AACA,aAAOA,YAAP;AACH;;AAED,WAAOhB,IAAP;AACH,GAhBD;;AAkBA,MAAIiB,MAAM,GAAG,MAAM;AACfhB,IAAAA,OAAO,CAAC;AAAEC,MAAAA,IAAI,EAAE,KAAR;AAAeC,MAAAA,IAAI,EAAE;AAArB,KAAD,CAAP;AACAG,IAAAA,YAAY,CAACY,UAAb,CAAwB,OAAxB;AACH,GAHD;;AAKA,SAAO;AAAElB,IAAAA,IAAF;AAAQI,IAAAA,KAAR;AAAea,IAAAA;AAAf,GAAP;AACH;;GA/BQlB,c;;AAiCT,OAAO,SAASoB,OAAT,GAAmB;AAAA;;AACtB,SAAOtB,UAAU,CAACC,mBAAD,CAAjB;AACH;;IAFeqB,O;;AAMhB,SAASC,YAAT,CAAuBC,QAAvB,EAAkC;AAAA;;AAE9B,QAAMC,QAAQ,GAAGvB,cAAc,EAA/B;AAEA,sBACI,QAAC,mBAAD,CAAqB,QAArB;AAA8B,IAAA,KAAK,EAAEuB,QAArC;AAAA,cACKD;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH;;IATQD,Y;UAEYrB,c;;;KAFZqB,Y;AAWT,eAAeA,YAAf","sourcesContent":["import { React, useState, useEffect, useContext } from \"react\";\r\nimport AuthProviderContext from \"./AuthProviderContext\";\r\n\r\nfunction useAuthProvide() {\r\n    const [user, setUser] = useState(\r\n        {\r\n            auth: false,\r\n            role: \"\",\r\n        });\r\n\r\n    let login = () => {\r\n        const token = localStorage.getItem(\"token\");\r\n\r\n        if (Boolean(token) && token !== \"undefined\" && token !== \"null\") {\r\n            let data = token.split(\".\")[1];\r\n            let decodedData = JSON.parse(window.atob(data));\r\n\r\n            let role = decodedData[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"];\r\n\r\n            let receivedUser = { auth: true, role };\r\n\r\n            setUser(receivedUser);\r\n            return receivedUser;\r\n        }\r\n\r\n        return user;\r\n    }\r\n\r\n    let logout = () => {\r\n        setUser({ auth: false, role: \"\" });\r\n        localStorage.removeItem(\"token\");\r\n    }\r\n\r\n    return { user, login, logout };\r\n}\r\n\r\nexport function useAuth() {\r\n    return useContext(AuthProviderContext);\r\n}\r\n\r\n\r\n\r\nfunction AuthProvider( children ) {\r\n\r\n    const authUser = useAuthProvide();\r\n\r\n    return (\r\n        <AuthProviderContext.Provider value={authUser}>\r\n            {children}\r\n        </AuthProviderContext.Provider>\r\n    );\r\n}\r\n\r\nexport default AuthProvider;\r\n\r\n"]},"metadata":{},"sourceType":"module"}