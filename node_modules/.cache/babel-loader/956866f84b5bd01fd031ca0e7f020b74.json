{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vab\\\\source\\\\repos\\\\LandSellingWebsite\\\\LandSellingWebClient\\\\land-selling-web\\\\src\\\\Components\\\\Layouts\\\\Header\\\\Header.js\",\n    _s = $RefreshSig$();\n\nimport \"./Header.sass\";\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Navbar, Nav, Button, Modal, Form, Dropdown, DropdownButton, NavDropdown } from 'react-bootstrap';\nimport { Link } from \"react-router-dom\";\nimport TextData from \"../../jsonData/Header.json\";\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Header() {\n  _s();\n\n  const [name, setName] = useState(null);\n  const [surname, setSurname] = useState(null);\n  const [email, setEmail] = useState(null);\n  const [password, setPassword] = useState(null);\n  const [role, setRole] = useState(null);\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  function handleSignOut() {\n    localStorage.clear();\n    setName(null);\n    setSurname(null);\n  }\n\n  function handleSignIn() {\n    const logInJson = {\n      \"email\": email,\n      \"password\": password\n    };\n    console.log(logInJson);\n    axios.post(\"https://localhost:44383/api/Authentication/Login\", logInJson).then(responce => {\n      var data = responce.data;\n      localStorage.setItem('token', data.token);\n    }).finally(function () {\n      myInfo();\n    }).catch(e => {\n      console.log(e);\n      alert(e);\n    });\n  }\n\n  const myInfo = () => {\n    axios.get('https://localhost:44383/api/Profile/info', {\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\",\n        \"Authorization\": 'Bearer ' + localStorage.getItem('token') //the token is a variable which holds the token\n\n      }\n    }).then(responce => {\n      var data = responce.data;\n      localStorage.setItem('UserName', data.name);\n      localStorage.setItem('UserSurname', data.surname);\n      localStorage.setItem('UserRole', data.role);\n      localStorage.setItem('UserEmail', data.email);\n      console.log(data);\n    }).finally(function () {\n      setShow(false);\n    }).catch(e => {\n      console.log(e);\n      alert(e);\n      return false;\n    });\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem('token') != null) {\n      setName(localStorage.getItem('UserName'));\n      setSurname(localStorage.getItem('UserSurname'));\n      setRole(localStorage.getItem('UserRole'));\n      setEmail(localStorage.getItem('UserEmail'));\n    }\n  });\n\n  const getDropdown = () => {\n    if (name !== null) {\n      return /*#__PURE__*/_jsxDEV(Nav, {\n        children: /*#__PURE__*/_jsxDEV(DropdownButton, {\n          id: \"dropdown-basic-button\",\n          title: name + ' ' + surname + ' ' + email + ' ' + role,\n          children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            variant: \"primary\",\n            id: \"dd-but-profile\",\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            variant: \"primary\",\n            id: \"dd-but-sign-out\",\n            onClick: handleSignOut,\n            children: \"Sign out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Nav, {\n        children: /*#__PURE__*/_jsxDEV(DropdownButton, {\n          id: \"dropdown-basic-button\",\n          title: \"Account\",\n          children: /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            variant: \"primary\",\n            id: \"dd-but-sign-in\",\n            onClick: handleShow,\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 29\n      }, this);\n    }\n  };\n\n  const getUserLinks = () => {\n    if (localStorage.getItem('UserRole') == 'Student') {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n          href: \"/user-task-list\",\n          children: \"Tasks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n          href: \"#user-stats\",\n          children: \"Statistics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    } else if (localStorage.getItem('UserRole') == 'Admin') {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n          href: \"/admin-task-creation\",\n          children: \"Create Task\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n          href: \"/user-list-page\",\n          children: \"Users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      collapseOnSelect: true,\n      expand: \"md\",\n      bg: \"dark\",\n      variant: \"dark\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n          href: \"/home\",\n          children: TextData.VLPI\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Navbar.Toggle, {\n          \"aria-controls\": \"responsive-navbar-nav\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n          id: \"responsive-navbar-nav\",\n          children: /*#__PURE__*/_jsxDEV(Nav, {\n            className: \"mr-auto\",\n            children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n              href: \"/home\",\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 21\n            }, this), getUserLinks(), /*#__PURE__*/_jsxDEV(Nav.Link, {\n              href: \"/about\",\n              children: \"About Us\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Nav, {\n          children: getDropdown()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"fromBasicEmail\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Email Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"email\",\n              placeholder: \"Enter email\",\n              value: email,\n              onChange: e => {\n                setEmail(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n              className: \"text-muted\",\n              children: \"We`ll never share your email with anyone else.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"fromBasicPassword\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              placeholder: \"Enter password\",\n              value: password,\n              onChange: e => {\n                setPassword(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"fromBasicCheckbox\",\n            children: /*#__PURE__*/_jsxDEV(Form.Check, {\n              type: \"checkbox\",\n              label: \"Remember me\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"fromSignInButton\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: handleSignIn,\n              children: \"Sign in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Header, \"9Q1bvr4uapIR/+u1Y0pkR9+eNdM=\");\n\n_c = Header;\nexport default Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["C:/Users/vab/source/repos/LandSellingWebsite/LandSellingWebClient/land-selling-web/src/Components/Layouts/Header/Header.js"],"names":["React","useState","useEffect","Container","Navbar","Nav","Button","Modal","Form","Dropdown","DropdownButton","NavDropdown","Link","TextData","useHistory","axios","Header","name","setName","surname","setSurname","email","setEmail","password","setPassword","role","setRole","show","setShow","handleClose","handleShow","handleSignOut","localStorage","clear","handleSignIn","logInJson","console","log","post","then","responce","data","setItem","token","finally","myInfo","catch","e","alert","get","headers","getItem","getDropdown","getUserLinks","VLPI","target","value"],"mappings":"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","sourcesContent":["import \"./Header.sass\";\r\nimport React, {useState, useEffect} from \"react\";\r\nimport {\r\n    Container,\r\n    Navbar,\r\n    Nav,\r\n    Button,\r\n    Modal,\r\n    Form,\r\n    Dropdown,\r\n    DropdownButton,\r\n    NavDropdown\r\n  } from 'react-bootstrap';\r\nimport { Link } from \"react-router-dom\";\r\nimport TextData from \"../../jsonData/Header.json\";\r\nimport { useHistory } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nfunction Header() {\r\n\r\n    const [name, setName] = useState(null);\r\n    const [surname, setSurname] = useState(null);\r\n    const [email, setEmail] = useState(null);\r\n    const [password, setPassword] = useState(null);\r\n    const [role, setRole] = useState(null);\r\n\r\n    const [show, setShow] = useState(false);\r\n\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    function handleSignOut() {\r\n        localStorage.clear();\r\n        setName(null);\r\n        setSurname(null);\r\n      }\r\n\r\n    function handleSignIn(){\r\n        const logInJson = {\r\n            \"email\": email,\r\n            \"password\": password\r\n        };\r\n\r\n        console.log(logInJson);\r\n\r\n        axios\r\n        .post(\"https://localhost:44383/api/Authentication/Login\", logInJson)\r\n        .then((responce) => {\r\n            var data = responce.data;\r\n            localStorage.setItem('token', data.token);\r\n        })\r\n        .finally(function(){\r\n            myInfo();\r\n        })\r\n        .catch((e) => {\r\n            console.log(e)\r\n            alert(e)\r\n        })\r\n        \r\n    }\r\n\r\n    const myInfo =() =>\r\n    {\r\n        axios.get('https://localhost:44383/api/Profile/info', {\r\n            headers: {\r\n                \"Content-type\": \"application/json; charset=UTF-8\",\r\n                \"Authorization\": 'Bearer ' + localStorage.getItem('token') //the token is a variable which holds the token\r\n            }\r\n        }).then((responce) => {\r\n            var data = responce.data;\r\n            localStorage.setItem('UserName', data.name);\r\n            localStorage.setItem('UserSurname', data.surname);\r\n            localStorage.setItem('UserRole', data.role);\r\n            localStorage.setItem('UserEmail', data.email);\r\n            console.log(data)\r\n        }).finally(function(){\r\n            setShow(false)\r\n        })\r\n        .catch((e) => {\r\n            console.log(e)\r\n            alert(e)\r\n            return false\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(localStorage.getItem('token') != null){\r\n            setName(localStorage.getItem('UserName'))\r\n            setSurname(localStorage.getItem('UserSurname'))\r\n            setRole(localStorage.getItem('UserRole'))\r\n            setEmail(localStorage.getItem('UserEmail'))\r\n        }\r\n      });\r\n\r\n    const getDropdown = ()=>{\r\n        if(name !== null){\r\n            return( \r\n                            <Nav>\r\n                                <DropdownButton id=\"dropdown-basic-button\" title={name + ' ' + surname + ' ' + email  + ' ' + role}>\r\n                                {/* <Dropdown.Item variant=\"primary\" id=\"dd-but-sign-in\" onClick={handleShow}>Sign in</Dropdown.Item> */}\r\n                                <Dropdown.Item variant=\"primary\" id=\"dd-but-profile\" >Profile</Dropdown.Item>\r\n                                <Dropdown.Item variant=\"primary\" id=\"dd-but-sign-out\" onClick={handleSignOut}>Sign out</Dropdown.Item>\r\n                            </DropdownButton>\r\n                        </Nav>)\r\n                    }else {\r\n                        return (\r\n                            <Nav>\r\n                            <DropdownButton id=\"dropdown-basic-button\" title=\"Account\">\r\n                                <Dropdown.Item variant=\"primary\" id=\"dd-but-sign-in\" onClick={handleShow}>Sign in</Dropdown.Item>\r\n                            </DropdownButton>\r\n                        </Nav>\r\n            )\r\n        }\r\n    }\r\n\r\n    const getUserLinks = ()=>{\r\n        if(localStorage.getItem('UserRole') == 'Student'){\r\n            return(\r\n            <>\r\n                <Nav.Link href=\"/user-task-list\">Tasks</Nav.Link>\r\n                <Nav.Link href=\"#user-stats\">Statistics</Nav.Link>\r\n            </>)\r\n        }\r\n        else if(localStorage.getItem('UserRole') == 'Admin'){\r\n            return(\r\n            <>\r\n                <Nav.Link href=\"/admin-task-creation\">Create Task</Nav.Link>\r\n                <Nav.Link href=\"/user-list-page\">Users</Nav.Link>\r\n            </>)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <Navbar collapseOnSelect expand=\"md\" bg=\"dark\" variant=\"dark\">\r\n        <Container>\r\n        <Navbar.Brand href=\"/home\">{TextData.VLPI}</Navbar.Brand>\r\n            <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n            <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n                <Nav className=\"mr-auto\">\r\n                    <Nav.Link href=\"/home\">Home</Nav.Link>\r\n                    {getUserLinks()}\r\n                    <Nav.Link href=\"/about\">About Us</Nav.Link>\r\n                </Nav>\r\n                \r\n            </Navbar.Collapse>\r\n            <Nav>\r\n            {getDropdown()}\r\n            </Nav>\r\n        </Container>\r\n        </Navbar>\r\n            <Modal show={show} onHide={handleClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Log in</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Form.Group controlId=\"fromBasicEmail\">\r\n                            <Form.Label>Email Address</Form.Label>\r\n                            <Form.Control type=\"email\" placeholder=\"Enter email\" value = {email} onChange={(e)=>{setEmail(e.target.value)}}/>\r\n                            <Form.Text className=\"text-muted\">We`ll never share your email with anyone else.</Form.Text>\r\n                        </Form.Group>\r\n                        <Form.Group controlId=\"fromBasicPassword\">\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control type=\"password\" placeholder=\"Enter password\" value = {password} onChange={(e)=>{setPassword(e.target.value)}}/>\r\n                        </Form.Group>\r\n                        <Form.Group controlId=\"fromBasicCheckbox\">\r\n                            <Form.Check type=\"checkbox\" label=\"Remember me\" />\r\n                        </Form.Group>\r\n                        <Form.Group controlId=\"fromSignInButton\">\r\n                            <Button variant=\"primary\" onClick={handleSignIn}>Sign in</Button>\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Header;"]},"metadata":{},"sourceType":"module"}